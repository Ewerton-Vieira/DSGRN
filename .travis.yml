sudo: false
language: cpp
compiler:
  - gcc
#  - clang
install:
- if [ "$CXX" = "g++" ]; then export CXX="g++-4.8" CC="gcc-4.8"; fi
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - gcc-4.8
    - g++-4.8
    - gcov-4.8
#    - clang
notifications:
  email:
    recipients:
      - sharker81@gmail.com
    on_success: change
    on_failure: always
before_install:
# boost
  - ./.install/boost.sh thread,system,serialization `pwd`
# sqlite3
  - ./.install/sqlite3.sh ./ 
# cpp-coveralls
  - export PATH=$HOME/.local/bin:$PATH
  - pip install cpp-coveralls --user `whoami`
script: 
  - which gcov-4.8
  - ./software/NetworkLogic/install.sh `pwd`
  - mkdir -p share/DSGRN/logic
  - ./software/NetworkLogic/bin/NetworkLogic 4
  - cp *.dat share/DSGRN/logic/
  - export PATH=$PATH:`pwd`/bin
  - ./install.sh ./ Debug
  - cat build/Testing/Temporary/LastTest.log
after_success:
  - coveralls --exclude lib --exclude tests --gcov-options '\-lp' --gcov /usr/bin/gcov-4.8
